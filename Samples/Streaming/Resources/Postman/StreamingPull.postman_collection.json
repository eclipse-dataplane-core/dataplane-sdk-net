{
	"info": {
		"_postman_id": "a5ec8438-2ba7-45df-bec0-c9006f64e347",
		"name": "Streaming Pull",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "647585",
		"_collection_link": "https://galactic-star-228409.postman.co/workspace/Dataplane-work~d820e7a7-8273-4d79-986e-96754a31f467/collection/647585-a5ec8438-2ba7-45df-bec0-c9006f64e347?action=share&source=collection_link&creator=647585"
	},
	"item": [
		{
			"name": "Consumer - Prepare",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"processId\": \"{{DATAFLOW_ID}}\",\n    \"datasetId\": \"test-asset\",\n    \"participantId\": \"{{PARTICIPANT_ID}}\",\n    \"agreementId\": \"test-agreement\",\n    \n    \"transferType\": {\n        \"flowType\": \"pull\",\n        \"destinationType\": \"NatsStream\"\n    }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{CONSUMER_HOST}}/api/v1/{{PARTICIPANT_ID}}/dataflows/prepare",
					"host": [
						"{{CONSUMER_HOST}}"
					],
					"path": [
						"api",
						"v1",
						"{{PARTICIPANT_ID}}",
						"dataflows",
						"prepare"
					]
				}
			},
			"response": []
		},
		{
			"name": "Provider - Start Dataflow",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"processId\": \"{{DATAFLOW_ID}}\",\n    \"datasetId\": \"test-asset\",\n    \"participantId\": \"{{PARTICIPANT_ID}}\",\n    \"agreementId\": \"test-agreement\",\n    \"dataAddress\": {\n        \"@type\": \"DataAddress\",\n        \"properties\":{\n            \n        }\n    },\n    \"transferType\": {\n        \"flowType\": \"pull\",\n        \"destinationType\": \"NatsStream\"\n    }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{PROVIDER_HOST}}/api/v1/{{PARTICIPANT_ID}}/dataflows/start",
					"host": [
						"{{PROVIDER_HOST}}"
					],
					"path": [
						"api",
						"v1",
						"{{PARTICIPANT_ID}}",
						"dataflows",
						"start"
					]
				}
			},
			"response": []
		},
		{
			"name": "Consumer - Notify Started",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"processId\": \"{{DATAFLOW_ID}}\",\n    \"datasetId\": \"test-asset\",\n    \"participantId\": \"{{PARTICIPANT_ID}}\",\n    \"agreementId\": \"test-agreement\",\n    \"dataAddress\": {\n        \"properties\": {\n            \"endpointType\": \"https://example.com/natsdp/v1/nats\",\n            \"endpoint\": \"nats://nats:4222\",\n            \"endpointProperties\": [\n                {\n                    \"key\": \"channel\",\n                    \"type\": \"string\",\n                    \"value\": \"{{DATAFLOW_ID}}.forward\"\n                },\n                {\n                    \"key\": \"replyChannel\",\n                    \"type\": \"string\",\n                    \"value\": \"{{DATAFLOW_ID}}.reply\"\n                }\n            ]\n        },\n        \"@context\": {\n            \"edc\": \"https://w3id.org/edc/v0.0.1/ns/\"\n        },\n        \"@type\": \"NatsStream\"\n    },\n    \"transferType\": {\n        \"flowType\": \"pull\",\n        \"destinationType\": \"HttpData\"\n    }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{CONSUMER_HOST}}/api/v1/{{PARTICIPANT_ID}}/dataflows/{{DATAFLOW_ID}}/started",
					"host": [
						"{{CONSUMER_HOST}}"
					],
					"path": [
						"api",
						"v1",
						"{{PARTICIPANT_ID}}",
						"dataflows",
						"{{DATAFLOW_ID}}",
						"started"
					]
				}
			},
			"response": []
		},
		{
			"name": "Provider - Terminate Dataflow",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"reason\": \"done\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{PROVIDER_HOST}}/api/v1/{{PARTICIPANT_ID}}/dataflows/{{DATAFLOW_ID}}/terminate",
					"host": [
						"{{PROVIDER_HOST}}"
					],
					"path": [
						"api",
						"v1",
						"{{PARTICIPANT_ID}}",
						"dataflows",
						"{{DATAFLOW_ID}}",
						"terminate"
					]
				}
			},
			"response": []
		},
		{
			"name": "Consumer - Terminate Dataflow",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"reason\": \"done\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{CONSUMER_HOST}}/api/v1/{{PARTICIPANT_ID}}/dataflows/{{DATAFLOW_ID}}/terminate",
					"host": [
						"{{CONSUMER_HOST}}"
					],
					"path": [
						"api",
						"v1",
						"{{PARTICIPANT_ID}}",
						"dataflows",
						"{{DATAFLOW_ID}}",
						"terminate"
					]
				}
			},
			"response": []
		}
	],
	"auth": {
		"type": "oauth2",
		"oauth2": [
			{
				"key": "addTokenTo",
				"value": "header",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "PARTICIPANT_ID",
			"value": "dataplane-signaling-api"
		},
		{
			"key": "PROVIDER_HOST",
			"value": "http://localhost:8080"
		},
		{
			"key": "DATAFLOW_ID",
			"value": "test-flow-1"
		},
		{
			"key": "CONSUMER_HOST",
			"value": "http://localhost:8081"
		}
	]
}